<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MBASCAPE — Create Your Team</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1>MBASCAPE — ESCAPE FROM ANALYTIX</h1>
        <div class="small">Team-based campus escape — collect clues, form the phrase, unlock the WAY OUT LOCK</div>
      </div>
    </header>

    <section class="panel">
      <div style="margin-bottom:12px">
        <strong>Create Your Team (4-5 Players)</strong>
      </div>
      
      <div style="margin-bottom:12px" id="teamEntry">
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <input placeholder="Player 1 name" id="p1" type="text" />
          <input placeholder="Player 2 name" id="p2" type="text" />
          <input placeholder="Player 3 name" id="p3" type="text" />
          <input placeholder="Player 4 name" id="p4" type="text" />
          <input placeholder="Player 5 name" id="p5" type="text" />
        </div>
        <div style="margin-top:8px;display:flex;gap:8px">
          <button class="btn" id="createTeam">Create Team & Start Game</button>
          <button class="btn secondary" id="autoFill">Autofill Names</button>
        </div>
      </div>
    </section>
  </div>

  <div id="alertModalBackdrop" class="modal-backdrop" style="display:none;z-index:100;">
    <div class="modal" style="width: 400px;max-width:90%;">
      <h3 id="alertModalTitle" style="margin-top:0;">Alert</h3>
      <p id="alertModalMessage" style="margin-top:12px;line-height:1.6;"></p>
      <div id="alertModalSubscript" class="small" style="margin-top:10px;display:none;"></div>
      <div style="margin-top:20px; text-align:right;">
        <button class="btn" id="alertModalCloseBtn">OK</button>
      </div>
    </div>
  </div>

<script>
  const createTeamBtn = document.getElementById('createTeam');
  const autoFillBtn = document.getElementById('autoFill');

  function showAlert(title, message) {
    const backdrop = document.getElementById('alertModalBackdrop');
    if (!backdrop) return;
    document.getElementById('alertModalTitle').textContent = title;
    document.getElementById('alertModalMessage').textContent = message;
    document.getElementById('alertModalSubscript').style.display = 'none'; // Hide subscript on this page
    backdrop.style.display = 'flex';
    const closeBtn = document.getElementById('alertModalCloseBtn');
    const closeHandler = () => {
        backdrop.style.display = 'none';
        closeBtn.removeEventListener('click', closeHandler);
    };
    closeBtn.addEventListener('click', closeHandler, { once: true });
  }

  autoFillBtn.addEventListener('click', () => {
    document.getElementById('p1').value = 'Player A';
    document.getElementById('p2').value = 'Player B';
    document.getElementById('p3').value = 'Player C';
    document.getElementById('p4').value = 'Player D';
  });

  createTeamBtn.addEventListener('click', () => {
    const players = [];
    for (let i = 1; i <= 5; i++) {
      const val = (document.getElementById('p' + i).value || '').trim();
      if (val) {
        players.push({ id: 'p' + i, name: val });
      }
    }

    if (players.length < 4) {
      showAlert('Invalid Team', 'You need at least 4 players to form a team.');
      return;
    }

    localStorage.setItem('mbascape_players', JSON.stringify(players));
    window.location.href = 'game.html';
  });
</script>
</body>
</html>
